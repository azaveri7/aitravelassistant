====================
course links
====================
build-end-to-end-genai-project-production-ready-agent-with-python

====================
GitHub link
====================

https://github.com/SharathRaju489/aitravelassistant

==========================
Requirements installation
==========================

source venv/bin/activate

pip install -r requirements.txt

==========================
To run frontend
==========================

streamlit run src/app.py


==========================
To install dependencies
==========================

pip install langchain langchain-community fastapi uvicorn

==========================
To run app on server
==========================

uvicorn src.main:app --reload

to test it, http://127.0.0.1:8000/docs#

==========================
Swagger link
==========================

http://127.0.0.1:8000/docs#/

==========================
Upload function testing
==========================

ðŸ“„ Processing PDF file: paris_guide.pdf

ðŸ“‘ PDF loaded successfully. Found 3 pages

âœ‚ï¸ Splitting document into chunks...

ðŸ“š Created 8 text chunks

[
Document(metadata={'page': 0, 'source': 'paris_guide.pdf'}, page_content='Paris Travel Guide\nPublished by: Wanderlust Guides\nDate: August 2025\nPages: 15\nIntroduction\nWelcome to Paris, the City of Light! This guide covers top attractions, dining options, and \nsuggested itineraries for an unforgettable visit.\nSection 1: Top Attractions (Pages 5-8)\nEiffel Tower (Page 5)\nThe iconic symbol of Paris, built in 1889.\nLocation: Champ de Mars, 7th arrondissement\nHours: 9:00 AM - 11:00 PM daily\nTickets: â‚¬10-â‚¬25 (elevator to top)\nTip: Visit at night for sparkling light shows.'),

Document(metadata={'page': 0, 'source': 'paris_guide.pdf'}, page_content='Tickets: â‚¬10-â‚¬25 (elevator to top)\nTip: Visit at night for sparkling light shows.\nLouvre Museum (Page 6)\nThe worldâ€™s largest art museum, home to the Mona Lisa and Venus de Milo.\nLocation: 1st arrondissement, right bank of the Seine\nHours: 9:00 AM - 6:00 PM (closed Tuesdays)\nTickets: â‚¬17 (online booking recommended)\nTip: Start with the Denon wing for famous works.\nNotre-Dame Cathedral (Page 7)\nA Gothic masterpiece, partially reopened after the 2019 fire.'),

Document(metadata={'page': 0, 'source': 'paris_guide.pdf'}, page_content='Notre-Dame Cathedral (Page 7)\nA Gothic masterpiece, partially reopened after the 2019 fire.\nLocation: ÃŽle de la CitÃ©, 4th arrondissement\nHours: 8:00 AM - 7:00 PM\nTickets: Free entry; tower climb â‚¬8\nTip: Check restoration progress before visiting.\nMusÃ©e dâ€™Orsay (Page 8)\nRenowned for Impressionist art by Monet, Van Gogh, and Degas.\nLocation: 7th arrondissement, left bank of the Seine\nHours: 9:30 AM - 6:00 PM (closed Mondays)\nTickets: â‚¬16\nTip: Arrive early to avoid crowds.'), Document(metadata={'page': 1, 'source': 'paris_guide.pdf'}, page_content='Section 2: Dining in Paris (Pages 9-11)\nLe CafÃ© Parisien (Page 9)\nA budget-friendly cafÃ© with classic French dishes.\nLocation: Montmartre, 18th arrondissement\nSpecialties: Croque-monsieur, onion soup\nPrice: â‚¬10-â‚¬15 per person\nHours: 8:00 AM - 10:00 PM\nTip: Try the outdoor seating for people-watching.\nLa Tour dâ€™Argent (Page 10)\nA Michelin-starred restaurant famous for its pressed duck.\nLocation: 5th arrondissement, near Notre-Dame\nSpecialties: Duck Ã  la presse, fine wines'), Document(metadata={'page': 1, 'source': 'paris_guide.pdf'}, page_content='Location: 5th arrondissement, near Notre-Dame\nSpecialties: Duck Ã  la presse, fine wines\nPrice: â‚¬100-â‚¬200 per person\nHours: 12:00 PM - 2:00 PM, 7:00 PM - 10:00 PM (closed Mondays)\nTip: Reserve months in advance.\nChez Paul (Page 11)\nA traditional bistro with hearty French comfort food.\nLocation: Le Marais, 3rd arrondissement\nSpecialties: Beef bourguignon, crÃ¨me brÃ»lÃ©e\nPrice: â‚¬20-â‚¬30 per person\nHours: 12:00 PM - 11:00 PM\nTip: Perfect for a casual dinner.'), Document(metadata={'page': 1, 'source': 'paris_guide.pdf'}, page_content='Price: â‚¬20-â‚¬30 per person\nHours: 12:00 PM - 11:00 PM\nTip: Perfect for a casual dinner.\nSection 3: Suggested Itineraries (Pages 12-15)\n2-Day Paris Itinerary (Page 12)\nDay 1:\nMorning: Louvre Museum (3 hours)\nAfternoon: Notre-Dame Cathedral and ÃŽle de la CitÃ© walk\nEvening: Dinner at Chez Paul'), Document(metadata={'page': 2, 'source': 'paris_guide.pdf'}, page_content='Day 2:\nMorning: Eiffel Tower visit (2 hours)\nAfternoon: MusÃ©e dâ€™Orsay (2 hours)\nEvening: Seine River cruise (â‚¬15, departs 8:00 PM)\nTip: Book museum tickets online to save time.\n3-Day Paris Itinerary (Page 13)\nDay 1: Same as 2-Day Day 1.\nDay 2: Same as 2-Day Day 2.\nDay 3:\nMorning: SacrÃ©-CÅ“ur Basilica in Montmartre\nAfternoon: Stroll through Luxembourg Gardens\nEvening: Dinner at La Tour dâ€™Argent\nTip: Wear comfortable shoes for Montmartreâ€™s hills.\nFamily-Friendly Itinerary (Page 14)'), Document(metadata={'page': 2, 'source': 'paris_guide.pdf'}, page_content='Tip: Wear comfortable shoes for Montmartreâ€™s hills.\nFamily-Friendly Itinerary (Page 14)\nMorning: Eiffel Tower (kid-friendly audio tours)\nAfternoon: Boat ride on the Seine\nEvening: Dinner at Le CafÃ© Parisien\nTip: Check for family discounts at attractions.')]
...

]

splitter = RecursiveCharacterTextSplitter(chunk_size=500, chunk_overlap=100)

Chunks are created in the size of 500 tokens, to maintain relation amongst chunks,
second chunk carries 100 tokens from first chunk



============================
chunks response stored in
============================

ingest_response_chunks.json

ingest.py

from fastapi import UploadFile
import fitz  # PyMuPDF
from langchain_text_splitters import RecursiveCharacterTextSplitter
from langchain_core.documents import Document


async def ingest_pdf(file: UploadFile):
    print(f"ðŸ“„ Processing PDF file: {file.filename}")
    content = await file.read()

    # Load PDF directly from memory
    docs = []
    pdf = fitz.open(stream=content, filetype="pdf")
    page_count = len(pdf)
    print(f"ðŸ“‘ PDF loaded successfully. Found {page_count} pages")

    try:
        for page_num in range(page_count):
            page = pdf[page_num]
            text = page.get_text()
            docs.append(Document(
                page_content=text,
                metadata={"page": page_num, "source": file.filename}
            ))
    finally:
        pdf.close()

    print("âœ‚ï¸ Splitting document into chunks...")
    splitter = RecursiveCharacterTextSplitter(chunk_size=500, chunk_overlap=100)
    chunks = splitter.split_documents(docs)
    print(f"ðŸ“š Created {len(chunks)} text chunks")
    print(chunks)

    return chunks


======================================
Vector databases
======================================
https://www.datacamp.com/blog/the-top-5-vector-databases

======================================
Code to upload collection to Qdrant
======================================
# Get the Qdrant client
    client = get_qdrant_client()

    # Prepare the payloads for Qdrant
    payloads = [{"text": chunk.page_content, **chunk.metadata} for chunk in chunks]

    # Upload points
    print(f"â¬†ï¸ Uploading {len(chunks)} documents to collection '{COLLECTION_NAME}'...")
    client.upload_collection(
        collection_name=COLLECTION_NAME,
        vectors=embeddings,
        payload=payloads,
    )
    print(f"âœ… Upload complete! Added {len(chunks)} chunks from {page_count} pages")


-> Understand that we are uploading embeddings and payloads both in the Qdrant so that
   we know which embeddings belong to which payload.
